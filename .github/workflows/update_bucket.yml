name: Synchronize Certificates to S3

on:
  workflow_dispatch:
    inputs:
      country:
        description: 'Select the country: Brasil'
        required: true
        default: 'Brasil'
      environment:
        description: 'Select the environment: dev'
        required: true
        default: 'dev'

jobs:
  sync_certificates_bucket:
    runs-on: ubuntu-latest
    env:
      PATH_TO_ENV: "${{ github.event.inputs.country }}/${{ github.event.inputs.environment }}"
      PATH_TO_CERTIFICATE: "${{ github.event.inputs.country }}/${{ github.event.inputs.environment }}/certificates"
      COUNTRY: "${{ github.event.inputs.country }}"
      ENVIRONMENT: "${{ github.event.inputs.environment }}"
    steps:
      - uses: lisboajeff/bucket_python@main
        with:
          country: ${{ env.COUNTRY }}
          environment: ${{ env.ENVIRONMENT }}
          certificates: "${{ github.workspace }}/${{ env.COUNTRY }}/${{ env.ENVIRONMENT }}/certificates"